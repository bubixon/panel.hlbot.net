var input=$(".paysafecard");input.keypress(function(t){var e=t.charCode||t.keyCode||t.which;if(9!==e&&(e<37||e>40)&&(!t.ctrlKey||99!==e&&118!==e)){t.preventDefault();var n=String.fromCharCode(e);if(/\D/.test(n)||this.selectionStart===this.selectionEnd&&this.value.replace(/\D/g,"").length>=(/^\D*3[47]/.test(this.value)?15:16))return!1;format($(this),n)}}),input.keydown(function(t){8!==t.keyCode&&46!==t.keyCode||(t.preventDefault(),format($(this),"",this.selectionStart===this.selectionEnd))}),input.on("paste",function(t){var e=$(this);setTimeout(function(){format(e,"")},50)}),input.blur(function(t){format($(this),this,!1)});var format=function(t,e,n){var i=0,r=0,s=0,a=t.val();!1!==e&&(i=t[0].selectionStart,r=t[0].selectionEnd,n&&i>0&&"-"==a[--i]&&i--,a=a.substring(0,i)+e+a.substring(r),s=i+e.length);for(var o=0,l=0,u=0,h="",c=/^\D*3[47]/.test(a)?[4,6,5]:[4,4,4,4],f=0;f<a.length&&(/\D/.test(a[f])?i>f&&s--:(o===c[u]&&(h+="-",o=0,u++,i>=f&&s++),h+=a[f],o++,l++),o!==c[u]||c.length!==u+1);f++);t.val(h),!1!==e&&t[0].setSelectionRange(s,s)};